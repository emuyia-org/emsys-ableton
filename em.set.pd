#N canvas 733 172 1167 736 8;
#X obj 453 1081 pgmout 15;
#X obj 451 1001 f;
#X obj 296 805 text get set;
#X floatatom 296 774 5 0 129 0 - - - 12;
#X obj 318 874 list;
#X obj 297 906 list trim;
#X obj 296 948 route md mnm rep len tin;
#X floatatom 287 1000 5 0 0 0 md\ pgm - - 12;
#X floatatom 323 1021 5 0 0 0 mnm\ pgm - - 12;
#X floatatom 350 1042 5 0 0 0 repeats - - 12;
#X floatatom 378 1074 5 0 0 0 beat\ length - - 12;
#X floatatom 405 1100 5 0 0 0 mnm\ TIn - - 12;
#X obj 374 841 sel 2;
#X obj 374 874 bng 25 250 50 0 empty empty schedule\ end 24 12 0 14 #191919 #e1e1e1 #e1e1e1;
#X obj 264 948 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 297 1365 counter 0 0 3;
#X obj 364 1244 - 1;
#X floatatom 318 1404 6 0 0 0 repeat\ no. - - 16;
#X obj 282 1639 sel 3;
#X obj 544 1001 f;
#X obj 625 942 bng 25 250 50 0 empty empty pgmout\ bang 27 12 0 10 #191919 #e1e1e1 #be5000;
#X obj 502 629 bng 25 250 50 0 empty empty cont 0 -8 0 12 #191919 #e1e1e1 #9ead00;
#X obj 540 629 bng 25 250 50 0 empty empty reset 0 -8 0 12 #191919 #e1e1e1 #e10d00;
#X obj 502 726 counter;
#X obj 540 672 t;
#X obj 364 1214 f;
#X obj 409 1214 f;
#X obj 489 1214 f;
#X obj 477 1450 sel 0;
#X obj 477 1416 change;
#X obj 477 1556 s stop;
#X obj 477 1485 onebang;
#X obj 477 1520 bng 25 250 50 0 empty empty end 27 11 0 10 #191919 #e1e1e1 #e16d00;
#X obj 296 839 list split 2;
#X obj 765 504 onebang;
#X obj 361 1478 sel 0;
#X obj 632 595 t b b;
#X msg 673 501 stop;
#X msg 398 1443 stop;
#X obj 182 582 text define set;
#X symbolatom 136 250 17 0 0 2 Set\ Name: - - 16;
#X obj 136 76 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 182 406 list fromsymbol;
#X obj 597 287 list fromsymbol;
#X obj 136 115 t, f 69;
#X obj 182 437 list append;
#X obj 182 505 list tosymbol;
#X msg 182 539 read \$1;
#X obj 255 610 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 136 38 loadbang;
#X msg 597 257 symbol .mset;
#X obj 765 474 r load;
#X text 722 389 note: only progress set when end of 'repeats' is cleared (onebang) \, then trigger change on load beat, f 30;
#X msg 476 1365 set -1;
#X obj 476 1311 < 1;
#X obj 476 1338 sel 1;
#X obj 361 1510 s seg_start;
#X obj 519 1176 r seg_start;
#X obj 178 1227 r beat1;
#X obj 409 1251 s beat_len;
#X msg 620 323 symbol sets/;
#X obj 620 349 list fromsymbol;
#X obj 182 469 list prepend;
#X obj 748 1222 pgm2bank;
#X obj 576 1222 pgm2bank;
#X obj 576 1252 s md_bank_label;
#X obj 748 1252 s mnm_bank_label;
#X symbolatom 136 305 10 0 0 2 MD - - 24;
#X symbolatom 197 305 10 0 0 2 MnM - - 24;
#X obj 172 164 r md_bank_label;
#X obj 283 164 r mnm_bank_label;
#X obj 145 956 s current_seg;
#X obj 31 195 r current_seg;
#X msg 31 250 set \$1;
#X symbolatom 136 342 34 0 0 0 - - - 12;
#X obj 31 224 tosymbol;
#X floatatom 321 294 5 0 0 2 rep\ # - - 12;
#X obj 322 248 bng 25 250 50 0 empty empty open -1 -8 0 12 #e3dfd9 #5a5a5a #6b6b6b;
#X msg 154 142 set \$1;
#N canvas 733 172 450 300 open_mset 0;
#X obj 55 101 pdcontrol;
#X msg 52 64 dir;
#X obj 55 282 openpanel;
#X obj 55 219 list append;
#X obj 55 137 t anything b;
#X obj 55 249 list tosymbol;
#X obj 170 205 list fromsymbol;
#X msg 170 174 symbol /sets;
#X obj 55 174 list fromsymbol;
#X obj 124 322 file split;
#X obj 124 377 list;
#X obj 80 339 bng 25 250 50 0 empty empty empty 17 7 0 10 #e3dfd9 #5a5a5a #5a5a5a;
#X obj 157 405 zl len;
#X obj 124 432 zl nth;
#X obj 124 499 list fromsymbol;
#X obj 124 638 list tosymbol;
#X obj 123 465 tosymbol;
#X obj 124 528 zl rev;
#X obj 125 609 zl rev;
#X obj 124 565 zl slice 5;
#X obj 55 25 inlet;
#X obj 55 405 outlet;
#X obj 124 692 outlet;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 9 0;
#X connect 2 0 21 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 4 1 7 0;
#X connect 5 0 2 0;
#X connect 6 0 3 1;
#X connect 7 0 6 0;
#X connect 8 0 3 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 13 1;
#X connect 13 0 16 0;
#X connect 14 0 17 0;
#X connect 15 0 22 0;
#X connect 16 0 14 0;
#X connect 17 0 19 0;
#X connect 18 0 15 0;
#X connect 19 1 18 0;
#X connect 20 0 1 0;
#X restore 374 323 pd open_mset;
#X obj 217 38 r reset_set;
#X obj 640 437 r reset_set;
#X obj 540 589 r reset_set;
#X obj 398 1416 r reset_set;
#X obj 319 320 bng 34 250 50 0 empty empty âŸ³ -2 17 0 40 #cb0006 #fff1e7 #e1dac6;
#X obj 319 382 s reset_set;
#X obj 432 397 del 500;
#X obj 432 369 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 716 1152 r reset_set;
#X obj 256 316 hsl 50 17 0 2 0 0 empty empty empty -2 -8 0 10 #000000 #ffffff #e1e1e1 0 1;
#X obj 589 134 t b f;
#X msg 570 195 range \$1 \$2;
#X obj 570 164 pack 0 127, f 16;
#X obj 389 1303 s seg_len;
#X obj 589 93 r seg_len;
#X obj 264 1559 f;
#X text 116 1510 fix: check that this is last seg a little after the seg starts \, in case the first check is too early before the rep info gets loaded, f 26;
#X obj 236 1498 r beat1;
#X obj 259 1531 del 50;
#X text 547 1351 fix: if last seg's rep length is 1 \, make sure we end the set by setting [change] to -1 so it's guaranteed to detect the change, f 17;
#X obj 469 1110 s md_pgmout;
#X obj 577 1110 s mnm_pgmout;
#X obj 601 1152 r md_pgmout;
#X obj 814 1159 r mnm_pgmout;
#X obj 546 1081 pgmout 14;
#X text 625 1069 fix: idk why 16 doesn't work for mnm but it doesn't. do ch14 instead.;
#X obj 322 999 bank2pgm;
#X obj 296 977 bank2pgm;
#X obj 716 1182 del 50;
#X text 145 986 done: mset format for pgm in elektron bank format, f 21;
#X obj 345 487 symbol;
#X obj 345 547 shell;
#X obj 292 248 bng 25 250 50 0 empty empty edit 0 -7 0 14 #e3dfd9 #5a5a5a #5a5a5a;
#X obj 345 515 prepend xdg-open;
#X obj 409 281 r reset;
#X obj 178 1256 onebang, f 16;
#X obj 237 1227 r downbeat;
#X obj 156 839 s current_seg_id;
#X obj 156 811 + 1;
#X obj 420 195 r current_seg_id;
#X floatatom 225 251 5 0 0 2 seg\ # - - 12;
#X obj 305 34 r reset_set;
#X obj 305 64 text size set;
#X floatatom 259 251 5 0 0 2 total - - 12;
#X obj 259 284 tgl 25 0 empty empty hold 0 -5 0 10 #214b6e #e1e1e1 #63b0e1 0 1;
#X obj 632 569 gate 1;
#X obj 620 528 == 0;
#X obj 366 248 loadmess 0;
#X obj 640 468 t;
#X obj 112 1326 gate 1;
#X obj 128 1227 == 0;
#X obj 156 1288 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 104 1265 gate 0;
#X obj 74 1155 tgl 25 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1 0 1;
#X obj 61 1288 sel 0;
#X obj 61 1258 == 0;
#X obj 21 1125 loadmess 0;
#X text 128 1154 make it so that holding will change the behaviour of reps such that if the last rep is reached \, stay at the last rep while hold is active, f 42;
#X obj 74 1189 t b f f;
#X text 7 1337 potential bug: strange behaviour where activating hold will not allow reps to lapse as per intended behaviour \, but when you open the em.set patch the behaviour fixes itself...? verify this..., f 37;
#X obj 413 629 r set_seg;
#X obj 413 659 - 1;
#X msg 413 683 set \$1;
#X obj 31 316 s set_seg;
#X msg 420 224 set \$1;
#X msg 360 195 set \$1;
#X obj 23 360 s set_rep;
#X obj 297 1282 r set_rep;
#X msg 297 1311 set \$1;
#X text 70 -78 todo: decide what to do about the end of an mset... should it stop \, or should it loop forever until manually stopped?;
#X text 390 -71 todo: add a way for em.set to load the last loaded mset file on launch;
#X obj 267 1244 r start_press;
#X obj 489 1251 s seg_tin?;
#X obj 823 474 r rep_last;
#X obj 282 1669 s rep_last;
#X obj 165 1443 s rep_id;
#X obj 409 164 r rep_id;
#X obj 473 248 r seg_hold;
#X obj 225 375 s seg_held;
#X obj 104 1125 r seg_held;
#X obj 553 487 r seg_held;
#X obj 544 1054 change;
#X obj 451 1054 change;
#X connect 1 0 100 0;
#X connect 1 0 162 0;
#X connect 2 0 33 0;
#X connect 2 0 71 0;
#X connect 2 1 12 0;
#X connect 3 0 2 0;
#X connect 3 0 118 0;
#X connect 4 0 33 0;
#X connect 5 0 6 0;
#X connect 5 0 14 0;
#X connect 6 0 107 0;
#X connect 6 1 106 0;
#X connect 6 2 9 0;
#X connect 6 3 10 0;
#X connect 6 4 11 0;
#X connect 7 0 1 1;
#X connect 8 0 19 1;
#X connect 9 0 25 1;
#X connect 10 0 26 1;
#X connect 11 0 27 1;
#X connect 12 0 13 0;
#X connect 13 0 31 1;
#X connect 14 0 15 2;
#X connect 15 0 17 0;
#X connect 15 0 95 1;
#X connect 15 2 130 0;
#X connect 16 0 15 4;
#X connect 16 0 18 1;
#X connect 16 0 54 0;
#X connect 17 0 29 0;
#X connect 17 0 35 0;
#X connect 17 0 155 0;
#X connect 18 0 154 0;
#X connect 19 0 101 0;
#X connect 19 0 161 0;
#X connect 20 0 1 0;
#X connect 20 0 19 0;
#X connect 21 0 23 0;
#X connect 22 0 24 0;
#X connect 23 0 3 0;
#X connect 24 0 20 0;
#X connect 24 1 23 3;
#X connect 25 0 16 0;
#X connect 25 0 93 0;
#X connect 26 0 59 0;
#X connect 27 0 152 0;
#X connect 28 0 31 0;
#X connect 29 0 28 0;
#X connect 31 0 32 0;
#X connect 32 0 30 0;
#X connect 33 0 5 0;
#X connect 33 1 4 0;
#X connect 34 0 125 1;
#X connect 35 0 56 0;
#X connect 36 0 20 0;
#X connect 36 1 21 0;
#X connect 37 0 34 0;
#X connect 38 0 31 0;
#X connect 39 1 48 0;
#X connect 40 0 42 0;
#X connect 41 0 44 0;
#X connect 42 0 45 0;
#X connect 43 0 45 1;
#X connect 44 0 40 0;
#X connect 44 1 50 0;
#X connect 44 1 60 0;
#X connect 45 0 62 0;
#X connect 46 0 47 0;
#X connect 47 0 39 0;
#X connect 49 0 41 0;
#X connect 50 0 43 0;
#X connect 51 0 34 0;
#X connect 53 0 29 0;
#X connect 54 0 55 0;
#X connect 55 0 53 0;
#X connect 57 0 27 0;
#X connect 57 0 26 0;
#X connect 57 0 25 0;
#X connect 57 0 63 0;
#X connect 57 0 64 0;
#X connect 58 0 115 0;
#X connect 60 0 61 0;
#X connect 61 0 62 1;
#X connect 62 0 46 0;
#X connect 63 0 66 0;
#X connect 64 0 65 0;
#X connect 69 0 67 0;
#X connect 70 0 68 0;
#X connect 72 0 75 0;
#X connect 73 0 74 0;
#X connect 75 0 73 0;
#X connect 76 0 146 0;
#X connect 77 0 79 0;
#X connect 78 0 40 0;
#X connect 79 0 47 0;
#X connect 79 0 87 0;
#X connect 79 0 110 1;
#X connect 79 1 78 0;
#X connect 80 0 41 0;
#X connect 81 0 128 0;
#X connect 82 0 22 0;
#X connect 83 0 38 0;
#X connect 84 0 85 0;
#X connect 86 0 84 0;
#X connect 87 0 86 0;
#X connect 88 0 108 0;
#X connect 89 0 146 0;
#X connect 90 0 92 0;
#X connect 90 1 92 1;
#X connect 91 0 89 0;
#X connect 92 0 91 0;
#X connect 94 0 90 0;
#X connect 95 0 18 0;
#X connect 97 0 98 0;
#X connect 98 0 95 0;
#X connect 102 0 64 1;
#X connect 103 0 63 1;
#X connect 106 0 8 0;
#X connect 107 0 7 0;
#X connect 108 0 63 0;
#X connect 108 0 64 0;
#X connect 110 0 113 0;
#X connect 112 0 110 0;
#X connect 113 0 111 0;
#X connect 114 0 84 0;
#X connect 115 0 131 0;
#X connect 116 0 115 1;
#X connect 118 0 117 0;
#X connect 119 0 144 0;
#X connect 120 0 143 0;
#X connect 121 0 122 0;
#X connect 122 0 123 0;
#X connect 124 0 158 0;
#X connect 125 0 36 0;
#X connect 126 0 125 0;
#X connect 127 0 124 0;
#X connect 128 0 37 0;
#X connect 128 1 127 0;
#X connect 129 0 15 0;
#X connect 130 0 132 1;
#X connect 131 0 129 1;
#X connect 132 0 129 0;
#X connect 133 0 138 0;
#X connect 134 1 129 0;
#X connect 135 0 134 0;
#X connect 136 0 133 0;
#X connect 138 0 130 0;
#X connect 138 1 135 0;
#X connect 138 2 132 0;
#X connect 140 0 141 0;
#X connect 141 0 142 0;
#X connect 142 0 23 0;
#X connect 144 0 120 0;
#X connect 145 0 76 0;
#X connect 145 0 89 0;
#X connect 147 0 148 0;
#X connect 148 0 15 0;
#X connect 151 0 115 1;
#X connect 153 0 34 1;
#X connect 156 0 145 0;
#X connect 157 0 124 0;
#X connect 159 0 133 0;
#X connect 160 0 126 0;
#X connect 161 0 104 0;
#X connect 162 0 0 0;
#X coords 0 0 1 1 223 149 1 134 215;
