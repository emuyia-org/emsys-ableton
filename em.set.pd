#N canvas 733 172 450 300 8;
#X obj 453 1081 pgmout 15;
#X obj 453 1046 f;
#X obj 296 805 text get set;
#X floatatom 296 774 5 0 129 0 - - - 12;
#X obj 318 874 list;
#X obj 297 906 list trim;
#X obj 296 948 route md mnm rep len tin;
#X floatatom 296 987 5 0 0 0 md\ pgm - - 12;
#X floatatom 323 1015 5 0 0 0 mnm\ pgm - - 12;
#X floatatom 350 1036 5 0 0 0 repeats - - 12;
#X floatatom 378 1074 5 0 0 0 beat\ length - - 12;
#X floatatom 405 1100 5 0 0 0 mnm\ TIn - - 12;
#X obj 374 841 sel 2;
#X obj 374 874 bng 25 250 50 0 empty empty schedule\ end 24 12 0 14 #191919 #e1e1e1 #e1e1e1;
#X obj 264 948 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 297 1365 counter 0 0 3;
#X obj 364 1244 - 1;
#X floatatom 297 1401 6 0 0 0 repeat\ no. - - 16;
#X obj 282 1639 sel 3;
#X obj 546 1081 pgmout 16;
#X obj 546 1046 f;
#X obj 627 987 bng 25 250 50 0 empty empty pgmout\ bang 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 502 629 bng 25 250 50 0 empty empty cont 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 540 629 bng 25 250 50 0 empty empty reset 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 502 726 counter;
#X obj 540 672 t;
#X obj 364 1214 f;
#X obj 409 1214 f;
#X obj 489 1214 f;
#X obj 477 1450 sel 0;
#X obj 477 1416 change;
#X obj 477 1556 s stop;
#X obj 477 1485 onebang;
#X obj 477 1520 bng 25 250 50 0 empty empty end 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 296 839 list split 2;
#X obj 632 559 onebang;
#X obj 627 1027 print pgm;
#X obj 357 689 print advance_set;
#X obj 361 1478 sel 0;
#X obj 632 595 t b b;
#X msg 540 556 stop;
#X msg 398 1443 stop;
#X obj 182 582 text define set;
#X symbolatom 136 250 34 0 0 2 Set\ Name: - - 16;
#X obj 285 582 print;
#X obj 136 76 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 182 406 list fromsymbol;
#X obj 597 287 list fromsymbol;
#X obj 136 115 t, f 69;
#X obj 182 437 list append;
#X obj 182 505 list tosymbol;
#X msg 182 539 read \$1;
#X obj 255 610 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 136 38 loadbang;
#X msg 597 257 symbol .mset;
#X obj 632 529 r load;
#X text 427 780 todo: change mset format for pgm messages so that it takes elektron bank format (A01 \, etc.) and converts to pgm, f 24;
#X text 489 872 note: pgmout needs to be sent separately \, before all the rest of the params. PGM needs to be before the next part \, and the other params need to be immediately before the next part otherwise it will affect the current part's playback., f 40;
#X text 589 444 note: only progress set when end of 'repeats' is cleared (onebang) \, then trigger change on load beat, f 30;
#X msg 476 1365 set -1;
#X obj 476 1311 < 1;
#X obj 476 1338 sel 1;
#X obj 361 1510 s seg_start;
#X obj 519 1176 r seg_start;
#X obj 360 916 print seg;
#X obj 282 1669 s seg_last;
#X obj 690 529 r seg_last;
#X obj 270 1322 r beat1;
#X obj 489 1251 s tin?;
#X obj 409 1251 s beat_len;
#X msg 620 323 symbol sets/;
#X obj 620 349 list fromsymbol;
#X obj 182 469 list prepend;
#X obj 748 1222 pgm2bank;
#X obj 576 1222 pgm2bank;
#X obj 576 1252 s md_bank_label;
#X obj 748 1252 s mnm_bank_label;
#X symbolatom 136 306 11 0 0 2 MD - - 24;
#X symbolatom 197 306 10 0 0 2 MnM - - 24;
#X obj 172 164 r md_bank_label;
#X obj 283 164 r mnm_bank_label;
#X obj 145 956 s current_seg;
#X obj 31 195 r current_seg;
#X msg 31 250 set \$1;
#X symbolatom 136 342 34 0 0 0 - - - 12;
#X obj 31 224 tosymbol;
#X obj 165 1443 s seg_repeat_num;
#X obj 409 164 r seg_repeat_num;
#X floatatom 255 294 10 0 0 2 repeat\ num: - - 12;
#X obj 320 241 bng 32 250 50 0 empty empty open -1 14 0 15 #e3dfd9 #5a5a5a #000000;
#X msg 154 142 set \$1;
#N canvas 733 172 450 300 open_mset 0;
#X obj 55 101 pdcontrol;
#X msg 52 64 dir;
#X obj 55 282 openpanel;
#X obj 55 219 list append;
#X obj 55 137 t anything b;
#X obj 55 249 list tosymbol;
#X obj 170 205 list fromsymbol;
#X msg 170 174 symbol /sets;
#X obj 55 174 list fromsymbol;
#X obj 124 322 file split;
#X obj 124 377 list;
#X obj 80 339 bng 25 250 50 0 empty empty empty 17 7 0 10 #e3dfd9 #5a5a5a #5a5a5a;
#X obj 157 405 zl len;
#X obj 124 432 zl nth;
#X obj 124 499 list fromsymbol;
#X obj 124 638 list tosymbol;
#X obj 123 465 tosymbol;
#X obj 124 528 zl rev;
#X obj 125 609 zl rev;
#X obj 124 565 zl slice 5;
#X obj 55 25 inlet;
#X obj 55 405 outlet;
#X obj 124 692 outlet;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 9 0;
#X connect 2 0 21 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 4 1 7 0;
#X connect 5 0 2 0;
#X connect 6 0 3 1;
#X connect 7 0 6 0;
#X connect 8 0 3 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 13 1;
#X connect 13 0 16 0;
#X connect 14 0 17 0;
#X connect 15 0 22 0;
#X connect 16 0 14 0;
#X connect 17 0 19 0;
#X connect 18 0 15 0;
#X connect 19 1 18 0;
#X connect 20 0 1 0;
#X restore 374 323 pd open_mset;
#X obj 217 38 r reset_set;
#X obj 540 529 r reset_set;
#X obj 540 595 r reset_set;
#X obj 398 1416 r reset_set;
#X obj 319 320 bng 34 250 50 0 empty empty âŸ³ -2 17 0 40 #cb0006 #fff1e7 #e1dac6;
#X obj 319 382 s reset_set;
#X obj 432 397 del 500;
#X obj 432 369 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 661 1176 r reset_set;
#X obj 256 316 hsl 50 17 0 2 0 0 empty empty empty -2 -8 0 10 #000000 #ffffff #e1e1e1 0 1;
#X obj 589 134 t b f;
#X msg 570 195 range \$1 \$2;
#X obj 570 164 pack 0 127, f 16;
#X obj 389 1303 s seg_len;
#X obj 589 93 r seg_len;
#X obj 320 281 bng 33 500 500 0 empty empty rep 4 17 0 14 #a25216 #5061ff #ffffff;
#X obj 138 1468 print seg_repeat_num;
#X obj 179 1684 print seg_last;
#X obj 328 1556 print seg_start;
#X obj 259 1127 print rep_incoming;
#X obj 126 1270 print seg_len_set_-1;
#X obj 544 1556 print seg_end;
#X obj 722 569 print load;
#X obj 264 1559 f;
#X text 116 1510 fix: check that this is last seg a little after the seg starts \, in case the first check is too early before the rep info gets loaded, f 26;
#X obj 236 1498 r beat1;
#X obj 259 1531 del 50;
#X text 547 1351 fix: if last seg's rep length is 1 \, make sure we end the set by setting [change] to -1 so it's guaranteed to detect the change, f 17;
#X obj 469 1110 s md_pgmout;
#X obj 577 1110 s mnm_pgmout;
#X obj 601 1152 r md_pgmout;
#X obj 767 1152 r mnm_pgmout;
#X connect 1 0 0 0;
#X connect 1 0 120 0;
#X connect 2 0 34 0;
#X connect 2 0 64 0;
#X connect 2 0 81 0;
#X connect 2 1 12 0;
#X connect 3 0 2 0;
#X connect 4 0 34 0;
#X connect 5 0 6 0;
#X connect 5 0 14 0;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 6 2 9 0;
#X connect 6 3 10 0;
#X connect 6 4 11 0;
#X connect 7 0 1 1;
#X connect 8 0 20 1;
#X connect 9 0 26 1;
#X connect 9 0 111 0;
#X connect 10 0 27 1;
#X connect 11 0 28 1;
#X connect 12 0 13 0;
#X connect 13 0 32 1;
#X connect 14 0 15 2;
#X connect 15 0 17 0;
#X connect 15 0 115 1;
#X connect 16 0 15 4;
#X connect 16 0 18 1;
#X connect 16 0 60 0;
#X connect 16 0 112 0;
#X connect 17 0 30 0;
#X connect 17 0 38 0;
#X connect 17 0 86 0;
#X connect 17 0 108 0;
#X connect 18 0 65 0;
#X connect 18 0 109 0;
#X connect 20 0 19 0;
#X connect 20 0 121 0;
#X connect 21 0 1 0;
#X connect 21 0 20 0;
#X connect 21 0 36 0;
#X connect 22 0 24 0;
#X connect 22 0 37 0;
#X connect 23 0 25 0;
#X connect 24 0 3 0;
#X connect 25 0 21 0;
#X connect 25 1 24 3;
#X connect 26 0 16 0;
#X connect 26 0 105 0;
#X connect 27 0 69 0;
#X connect 28 0 68 0;
#X connect 29 0 32 0;
#X connect 30 0 29 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 33 0 113 0;
#X connect 34 0 5 0;
#X connect 34 1 4 0;
#X connect 35 0 39 0;
#X connect 38 0 62 0;
#X connect 38 0 110 0;
#X connect 39 0 21 0;
#X connect 39 1 22 0;
#X connect 40 0 35 0;
#X connect 41 0 32 0;
#X connect 42 1 52 0;
#X connect 43 0 46 0;
#X connect 45 0 48 0;
#X connect 46 0 49 0;
#X connect 47 0 49 1;
#X connect 48 0 43 0;
#X connect 48 1 54 0;
#X connect 48 1 70 0;
#X connect 49 0 72 0;
#X connect 50 0 51 0;
#X connect 51 0 44 0;
#X connect 51 0 42 0;
#X connect 53 0 45 0;
#X connect 54 0 47 0;
#X connect 55 0 35 0;
#X connect 55 0 114 0;
#X connect 59 0 30 0;
#X connect 60 0 61 0;
#X connect 61 0 59 0;
#X connect 63 0 28 0;
#X connect 63 0 27 0;
#X connect 63 0 26 0;
#X connect 63 0 73 0;
#X connect 63 0 74 0;
#X connect 66 0 35 1;
#X connect 67 0 15 0;
#X connect 70 0 71 0;
#X connect 71 0 72 1;
#X connect 72 0 50 0;
#X connect 73 0 76 0;
#X connect 74 0 75 0;
#X connect 79 0 77 0;
#X connect 80 0 78 0;
#X connect 82 0 85 0;
#X connect 83 0 84 0;
#X connect 85 0 83 0;
#X connect 87 0 88 0;
#X connect 87 0 101 0;
#X connect 87 0 107 0;
#X connect 89 0 91 0;
#X connect 90 0 43 0;
#X connect 91 0 51 0;
#X connect 91 0 99 0;
#X connect 91 1 90 0;
#X connect 92 0 45 0;
#X connect 93 0 40 0;
#X connect 94 0 23 0;
#X connect 95 0 41 0;
#X connect 96 0 97 0;
#X connect 98 0 96 0;
#X connect 99 0 98 0;
#X connect 100 0 73 0;
#X connect 100 0 74 0;
#X connect 102 0 104 0;
#X connect 102 1 104 1;
#X connect 103 0 101 0;
#X connect 104 0 103 0;
#X connect 106 0 102 0;
#X connect 115 0 18 0;
#X connect 117 0 118 0;
#X connect 118 0 115 0;
#X connect 122 0 74 1;
#X connect 123 0 73 1;
#X coords 0 0 1 1 224 150 1 134 215;
