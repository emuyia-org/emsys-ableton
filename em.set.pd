#N canvas 733 172 450 300 8;
#X obj 486 1045 pgmout 15;
#X obj 486 1010 f;
#X obj 296 761 text get set;
#X floatatom 296 730 5 0 129 0 - - - 12;
#X obj 318 830 list;
#X obj 297 862 list trim;
#X obj 296 904 route md mnm rep len tin;
#X floatatom 296 943 5 0 0 0 md\ pgm - - 12;
#X floatatom 323 971 5 0 0 0 mnm\ pgm - - 12;
#X floatatom 350 992 5 0 0 0 repeats - - 12;
#X floatatom 378 1030 5 0 0 0 beat\ length - - 12;
#X floatatom 405 1056 5 0 0 0 mnm\ TIn - - 12;
#X obj 374 797 sel 2;
#X obj 374 830 bng 25 250 50 0 empty empty schedule\ end 24 12 0 14 #191919 #e1e1e1 #e1e1e1;
#X obj 264 904 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 302 1243 counter 0 0 3;
#X obj 364 1200 - 1;
#X floatatom 302 1279 6 0 0 0 repeat\ no. - - 16;
#X obj 289 1348 sel 3;
#X obj 579 1045 pgmout 16;
#X obj 579 1010 f;
#X obj 627 943 bng 25 250 50 0 empty empty pgmout\ bang 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 502 585 bng 25 250 50 0 empty empty cont 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 540 585 bng 25 250 50 0 empty empty reset 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 502 682 counter;
#X obj 540 628 t;
#X obj 364 1170 f;
#X obj 409 1170 f;
#X obj 489 1170 f;
#X obj 477 1406 sel 0;
#X obj 477 1372 change;
#X obj 477 1512 s stop;
#X obj 477 1441 onebang;
#X obj 477 1476 bng 25 250 50 0 empty empty end 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 296 795 list split 2;
#X obj 632 515 onebang;
#X obj 627 983 print pgm;
#X obj 357 645 print advance_set;
#X obj 368 1342 sel 0;
#X obj 632 551 t b b;
#X msg 540 512 stop;
#X msg 547 1399 stop;
#X obj 182 538 text define set;
#X symbolatom 136 213 34 0 0 2 Set\ Name: - - 24;
#X obj 285 538 print;
#X obj 136 64 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 182 362 list fromsymbol;
#X obj 597 243 list fromsymbol;
#X obj 136 103 t, f 69;
#X obj 182 393 list append;
#X obj 182 461 list tosymbol;
#X msg 182 495 read \$1;
#X obj 201 617 s stop;
#X obj 201 585 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 136 26 loadbang;
#X msg 597 213 symbol .mset;
#X obj 632 485 r load;
#X text 427 736 todo: change mset format for pgm messages so that it takes elektron bank format (A01 \, etc.) and converts to pgm, f 24;
#X text 489 828 note: pgmout needs to be sent separately \, before all the rest of the params. PGM needs to be before the next part \, and the other params need to be immediately before the next part otherwise it will affect the current part's playback., f 40;
#X text 589 400 note: only progress set when end of 'repeats' is cleared (onebang) \, then trigger change on load beat, f 30;
#X msg 476 1321 set -1;
#X obj 476 1267 < 1;
#X obj 476 1294 sel 1;
#X text 521 1267 note: fixes bug where seg doesn't end if last seg rep length is 1, f 17;
#X obj 368 1374 s seg_start;
#X obj 519 1123 r seg_start;
#X obj 360 872 print seg;
#X obj 289 1378 s seg_last;
#X obj 690 485 r seg_last;
#X obj 275 1200 r beat1;
#X obj 489 1207 s tin?;
#X obj 409 1207 s beat_len;
#X msg 620 279 symbol sets/;
#X obj 620 305 list fromsymbol;
#X obj 182 425 list prepend;
#X obj 716 1170 pgm2bank;
#X obj 593 1170 pgm2bank;
#X obj 593 1200 s md_bank_label;
#X obj 716 1200 s mnm_bank_label;
#X symbolatom 136 269 11 0 0 2 MD - - 24;
#X symbolatom 197 269 10 0 0 2 MnM - - 24;
#X obj 172 152 r md_bank_label;
#X obj 283 152 r mnm_bank_label;
#X obj 145 912 s current_seg;
#X obj 31 152 r current_seg;
#X msg 31 206 set \$1;
#X symbolatom 136 305 34 0 0 0 - - - 12;
#X obj 31 180 tosymbol;
#X obj 170 1321 s seg_repeat_num;
#X obj 429 152 r seg_repeat_num;
#X floatatom 256 279 10 0 0 2 repeat\ num: - - 12;
#X obj 320 213 bng 32 250 50 0 empty empty open -1 -10 0 15 #e3dfd9 #5a5a5a #d3d3d3;
#X msg 154 130 set \$1;
#N canvas 733 172 450 300 open_mset 0;
#X obj 55 101 pdcontrol;
#X msg 52 64 dir;
#X obj 55 282 openpanel;
#X obj 55 219 list append;
#X obj 55 137 t anything b;
#X obj 55 249 list tosymbol;
#X obj 170 205 list fromsymbol;
#X msg 170 174 symbol /sets;
#X obj 55 174 list fromsymbol;
#X obj 124 322 file split;
#X obj 124 377 list;
#X obj 80 339 bng 25 250 50 0 empty empty empty 17 7 0 10 #e3dfd9 #5a5a5a #5a5a5a;
#X obj 157 405 zl len;
#X obj 124 432 zl nth;
#X obj 124 499 list fromsymbol;
#X obj 124 638 list tosymbol;
#X obj 123 465 tosymbol;
#X obj 124 528 zl rev;
#X obj 125 609 zl rev;
#X obj 124 565 zl slice 5;
#X obj 55 25 inlet;
#X obj 55 405 outlet;
#X obj 124 692 outlet;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 9 0;
#X connect 2 0 21 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 4 1 7 0;
#X connect 5 0 2 0;
#X connect 6 0 3 1;
#X connect 7 0 6 0;
#X connect 8 0 3 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 13 1;
#X connect 13 0 16 0;
#X connect 14 0 17 0;
#X connect 15 0 22 0;
#X connect 16 0 14 0;
#X connect 17 0 19 0;
#X connect 18 0 15 0;
#X connect 19 1 18 0;
#X connect 20 0 1 0;
#X restore 360 280 pd open_mset;
#X obj 661 1123 r stop_press;
#X obj 217 26 r reset_set;
#X obj 540 485 r reset_set;
#X obj 540 551 r reset_set;
#X obj 547 1372 r reset_set;
#X obj 319 291 bng 34 250 50 0 empty empty âŸ³ -2 17 0 40 #cb0006 #fff1e7 #e1dac6;
#X obj 319 338 s reset_set;
#X connect 1 0 0 0;
#X connect 1 0 76 1;
#X connect 2 0 34 0;
#X connect 2 0 66 0;
#X connect 2 0 83 0;
#X connect 2 1 12 0;
#X connect 3 0 2 0;
#X connect 4 0 34 0;
#X connect 5 0 6 0;
#X connect 5 0 14 0;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 6 2 9 0;
#X connect 6 3 10 0;
#X connect 6 4 11 0;
#X connect 7 0 1 1;
#X connect 8 0 20 1;
#X connect 9 0 26 1;
#X connect 10 0 27 1;
#X connect 11 0 28 1;
#X connect 12 0 13 0;
#X connect 13 0 32 1;
#X connect 14 0 15 2;
#X connect 15 0 17 0;
#X connect 16 0 15 4;
#X connect 16 0 18 1;
#X connect 16 0 61 0;
#X connect 17 0 18 0;
#X connect 17 0 30 0;
#X connect 17 0 38 0;
#X connect 17 0 88 0;
#X connect 18 0 67 0;
#X connect 20 0 19 0;
#X connect 20 0 75 1;
#X connect 21 0 1 0;
#X connect 21 0 20 0;
#X connect 21 0 36 0;
#X connect 22 0 24 0;
#X connect 22 0 37 0;
#X connect 23 0 25 0;
#X connect 24 0 3 0;
#X connect 25 0 21 0;
#X connect 25 1 24 3;
#X connect 26 0 16 0;
#X connect 27 0 71 0;
#X connect 28 0 70 0;
#X connect 29 0 32 0;
#X connect 30 0 29 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 34 0 5 0;
#X connect 34 1 4 0;
#X connect 35 0 39 0;
#X connect 38 0 64 0;
#X connect 39 0 21 0;
#X connect 39 1 22 0;
#X connect 40 0 35 0;
#X connect 41 0 32 0;
#X connect 42 1 53 0;
#X connect 43 0 46 0;
#X connect 45 0 48 0;
#X connect 46 0 49 0;
#X connect 47 0 49 1;
#X connect 48 0 43 0;
#X connect 48 1 55 0;
#X connect 48 1 72 0;
#X connect 49 0 74 0;
#X connect 50 0 51 0;
#X connect 51 0 44 0;
#X connect 51 0 42 0;
#X connect 53 0 52 0;
#X connect 54 0 45 0;
#X connect 55 0 47 0;
#X connect 56 0 35 0;
#X connect 60 0 30 0;
#X connect 61 0 62 0;
#X connect 62 0 60 0;
#X connect 65 0 28 0;
#X connect 65 0 27 0;
#X connect 65 0 26 0;
#X connect 65 0 75 0;
#X connect 65 0 76 0;
#X connect 68 0 35 1;
#X connect 69 0 15 0;
#X connect 72 0 73 0;
#X connect 73 0 74 1;
#X connect 74 0 50 0;
#X connect 75 0 78 0;
#X connect 76 0 77 0;
#X connect 81 0 79 0;
#X connect 82 0 80 0;
#X connect 84 0 87 0;
#X connect 85 0 86 0;
#X connect 87 0 85 0;
#X connect 89 0 90 0;
#X connect 91 0 93 0;
#X connect 92 0 43 0;
#X connect 93 0 51 0;
#X connect 93 1 92 0;
#X connect 94 0 75 0;
#X connect 94 0 76 0;
#X connect 95 0 45 0;
#X connect 96 0 40 0;
#X connect 97 0 23 0;
#X connect 98 0 41 0;
#X connect 99 0 100 0;
#X coords 0 0 1 1 227 142 2 135 190;
