#N canvas 1440 900 1920 978 12;
#X obj 495 1150 midiout;
#X obj 542 993 bng 65 250 50 0 empty empty A01 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 636 992 bng 65 250 50 0 empty empty A04 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X msg 648 1121 4;
#X msg 555 1121 1;
#X obj 542 1074 t;
#X obj 636 1073 t;
#X text 542 965 pattern interrupt test;
#X obj 87 323 midiout;
#X msg 63 252 250;
#X obj 131 759 knob 75 30 300 0 120 empty empty #191919 #696969 #e1e1e1 1 0 0 0 1 270 0 0 30;
#X msg 172 252 252;
#X msg 114 252 251;
#X obj 63 217 bng 25 250 50 0 empty empty start> 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 116 217 bng 25 250 50 0 empty empty cont> 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 172 217 bng 25 250 50 0 empty empty stop> 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X floatatom 132 859 11 0 0 0 tempo - - 16;
#X msg 503 1111 250;
#X obj 326 225 counter 0 0 5;
#X obj 462 106 midirealtimein;
#X obj 326 260 sel 0;
#X obj 326 293 bng 25 250 50 0 empty empty >tick 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 539 224 bng 25 250 50 0 empty empty >stop 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 487 224 bng 25 250 50 0 empty empty >cont 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 426 225 bng 25 250 50 0 empty empty >start 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 132 968 midiout;
#X obj 389 146 gate 0, f 12;
#X obj 389 107 tgl 25 0 empty empty clock\ in 17 7 0 10 #191919 #e1e1e1 #e1e1e1 0 1;
#X obj 223 293 counter 0 0 3;
#X obj 223 322 sel 0;
#X obj 223 351 bng 52 50 25 0 empty empty 1/4\ note\ pulse 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#N canvas 733 172 450 300 midi_throttle 0;
#X obj 91 128 change;
#X obj 91 352 f, f 11;
#X obj 91 396 change;
#X obj 91 299 onebang, f 25;
#X obj 189 223 counter 0 0 1;
#X obj 189 255 sel 1;
#X obj 91 160 t b f;
#X obj 167 122 loadbang;
#X msg 167 151 1;
#X obj 163 180 metro 100;
#X obj 91 51 inlet;
#X obj 91 434 outlet;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 11 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 3 1;
#X connect 6 0 3 0;
#X connect 6 1 1 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 1 0;
#X connect 9 0 4 0;
#X connect 10 0 0 0;
#X restore 131 900 pd midi_throttle;
#X obj 365 468 dac~;
#X obj 403 380 line;
#X obj 329 407 *~ 0;
#X msg 369 350 0.1 \, 0 150;
#X msg 479 301 set 0;
#X msg 426 304 1;
#X msg 513 264 0;
#X obj 323 186 sel 248;
#X obj 421 180 sel 250 251 252;
#X obj 86 131 stripnote;
#X obj 86 170 sel 41 40;
#X text 48 75 from minilab (play/stop pads);
#X obj 86 101 notein;
#X obj 398 424 tgl 20 0 empty empty test\ blip 0 -10 0 12 #000000 #ffffff #bbbbbb 0 1;
#X obj 351 436 *~ 0;
#X obj 324 377 saw~ 500;
#X obj 428 261 t, f 8;
#X text 911 1645 ., f 3;
#X msg 556 1159 \$1;
#X msg 49 936 tempo \$1;
#X msg 87 291 \$1;
#X obj 16 325 s to-mcl;
#X obj 54 968 s to-mcl;
#X obj 643 1196 s to-mcl;
#X msg 642 1167 pgm \$1;
#X obj 551 1193 pgmout 15;
#X text 500 1218 assumes MCL PGM IN is set to ch15;
#X text 716 940 PGM followed by immediate play signal works OK on MD/MnM standalone \, but MCL requires a gap... therefore \, this should probably only be sent to MnM \, separately \, when MCL performs a switchover. the PGM out from MCL to MnM should be intercepted \, and paired with a 250 signal to interrupt the MnM after the pattern changes. This would also serve to keep the MnM in sync with MCL more reliably (hopefully). testing will be needed to ensure this works \, but without the MnM with me right now that might be a little hard. I can only program it in concept at the moment. unfortunately it looks like since PGM OUT to USB is not available in MCL at the moment \, I will need to intercept the MIDI from Port 2 via a separate MIDI interface. I cannot find a way to ascertain the pattern that's being loaded from sysex from MCL alone;
#X msg 81 722 set \$1;
#X obj 93 663 /;
#X obj 94 600 t b f;
#X msg 72 632 60000;
#X obj 97 419 midirealtimein;
#X obj 98 459 sel 248;
#X obj 98 523 sel 0;
#X obj 98 493 counter 0 0 23;
#X msg 170 584 1;
#X msg 256 586 0;
#X obj 168 619 pipe 500;
#X msg 204 585 clear;
#X obj 82 693 spigot;
#X obj 171 550 t;
#X msg 674 678 \$1;
#X obj 669 712 pgmout 15;
#X obj 743 715 s to-mcl;
#X msg 742 686 pgm \$1;
#X obj 692 573 hradio 24 1 0 16 empty empty Pattern 0 -10 0 12 #202020 #dfdfdf #dfdfdf 0;
#X floatatom 687 639 5 0 0 0 PGM - - 0;
#X obj 688 608 + 1;
#X obj 757 512 * 16;
#X obj 759 541 + 1;
#X obj 753 478 hradio 24 1 0 8 empty empty Bank 0 -10 0 12 #202020 #dfdfdf #dfdfdf 0;
#X floatatom 773 306 5 1 128 0 PGM - - 0;
#X obj 798 372 / 16;
#X obj 772 276 pgmin 48;
#X obj 773 335 - 1;
#X obj 799 402 int;
#X msg 795 431 set \$1;
#X obj 731 401 % 16;
#X msg 730 428 set \$1;
#X obj 640 712 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X symbolatom 972 507 4 0 0 0 current - - 24;
#N canvas 1440 0 1600 836 banknpat 0;
#X obj 47 164 + 1;
#X obj 89 62 + 1;
#X obj 46 190 sel 1 2 3 4 5 6 7 8;
#X obj 89 93 split 9;
#X obj 86 159 tosymbol;
#X msg 130 315 set \$1;
#X msg 88 125 0\$1;
#X msg 47 235 A;
#X msg 80 232 B;
#X msg 113 233 C;
#X msg 149 235 D;
#X msg 186 234 E;
#X msg 222 234 F;
#X msg 256 233 G;
#X msg 288 235 H;
#X obj 126 406 makefilename not-set-yet;
#X obj 127 283 makefilename %%s%s;
#X obj 57 284 tosymbol;
#X obj 45 28 inlet;
#X obj 90 30 inlet;
#X obj 128 443 outlet;
#X obj 129 358 buddy;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 7 0;
#X connect 2 1 8 0;
#X connect 2 2 9 0;
#X connect 2 3 10 0;
#X connect 2 4 11 0;
#X connect 2 5 12 0;
#X connect 2 6 13 0;
#X connect 2 7 14 0;
#X connect 3 0 6 0;
#X connect 3 1 4 0;
#X connect 4 0 16 0;
#X connect 5 0 21 1;
#X connect 6 0 4 0;
#X connect 7 0 17 0;
#X connect 8 0 17 0;
#X connect 9 0 17 0;
#X connect 10 0 17 0;
#X connect 11 0 17 0;
#X connect 12 0 17 0;
#X connect 13 0 17 0;
#X connect 14 0 17 0;
#X connect 15 0 20 0;
#X connect 16 0 5 0;
#X connect 17 0 21 0;
#X connect 18 0 0 0;
#X connect 19 0 1 0;
#X connect 21 0 15 0;
#X connect 21 1 15 0;
#X restore 967 472 pd banknpat;
#N canvas 1440 0 1600 836 emsys_debug 0;
#X obj 43 95 loadbang;
#X obj 570 38 notein;
#X msg 570 129 note: \$1 \, vel: \$2 \, ch: \$3;
#X obj 570 90 pack f f f;
#X obj 567 173 spigot;
#X obj 42 154 print sys;
#X msg 43 125 welcome;
#X obj 631 167 tgl 20 0 empty empty debug\ MIDI 0 -10 0 12 #000000 #dfdfdf #dfdfdf 0 1;
#X obj 134 86 r to-mcl;
#X obj 134 117 print to-mcl;
#X obj 136 146 r from-mcl;
#X obj 136 177 print from-mcl;
#X obj 570 199 print from-midi;
#X msg 673 53 pgm \$1;
#X obj 269 154 spigot;
#X obj 321 126 tgl 20 0 empty empty debug\ rt\ MIDI 0 -10 0 12 #000000 #dfdfdf #dfdfdf 0 1;
#X obj 256 60 midirealtimein;
#X obj 258 102 sel 248;
#X obj 423 68 sysexin;
#X obj 416 183 print from-sysex;
#X obj 674 21 pgmin;
#X obj 671 88 print from-midi;
#X obj 262 188 print from-midi_rt;
#X obj 422 139 spigot;
#X obj 474 111 tgl 20 0 empty empty debug\ sysex 0 -10 0 12 #000000 #dfdfdf #dfdfdf 0 1;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 1 1 3 1;
#X connect 1 2 3 2;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 12 0;
#X connect 6 0 5 0;
#X connect 7 0 4 1;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 13 0 21 0;
#X connect 14 0 22 0;
#X connect 15 0 14 1;
#X connect 16 0 17 0;
#X connect 17 1 14 0;
#X connect 18 0 23 0;
#X connect 20 0 13 0;
#X connect 23 0 19 0;
#X connect 24 0 23 1;
#X restore 46 28 pd emsys_debug;
#N canvas 1746 1254 530 421 tempo2sysex 0;
#X obj 65 111 expr round($f1 * 24);
#X obj 65 145 expr ($f1 >> 7) & 0x7F;
#X obj 241 147 expr $f1 & 0x7F;
#X text 129 234 sysex IN to MD requires MCL: USB FWD: 1, f 22;
#X msg 65 212 240 0 32 60 2 0 97 \$1 \$2 247;
#X obj 66 181 pack f f;
#X obj 62 72 inlet;
#X obj 67 245 outlet;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 5 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X restore 133 935 pd tempo2sysex;
#X obj 626 465 midiout;
#X msg 626 435 250;
#X obj 626 407 bng 20 250 50 0 empty empty interrupt 0 -10 0 10 #202020 #dfdfdf #dfdfdf;
#X obj 626 365 onebang;
#X obj 618 332 bng 20 50 10 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 664 329 bng 20 150 100 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 99 563 realtime;
#X obj 372 592 realtime;
#X floatatom 368 628 8 0 0 0 latency - - 0;
#X obj 354 671 del;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 3 0 50 0;
#X connect 4 0 50 0;
#X connect 5 0 17 0;
#X connect 5 1 4 0;
#X connect 6 0 17 0;
#X connect 6 1 3 0;
#X connect 9 0 52 0;
#X connect 10 0 16 0;
#X connect 10 0 73 0;
#X connect 11 0 52 0;
#X connect 12 0 52 0;
#X connect 13 0 9 0;
#X connect 13 0 104 0;
#X connect 14 0 12 0;
#X connect 15 0 11 0;
#X connect 16 0 31 0;
#X connect 17 0 0 0;
#X connect 18 0 20 0;
#X connect 19 0 26 1;
#X connect 19 0 40 0;
#X connect 20 0 21 0;
#X connect 20 0 28 0;
#X connect 22 0 38 0;
#X connect 23 0 37 0;
#X connect 24 0 48 0;
#X connect 24 0 104 1;
#X connect 26 0 39 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 30 0 35 0;
#X connect 30 0 101 0;
#X connect 31 0 51 0;
#X connect 31 0 96 0;
#X connect 33 0 34 1;
#X connect 34 0 46 0;
#X connect 35 0 33 0;
#X connect 36 0 18 0;
#X connect 36 0 28 0;
#X connect 37 0 27 0;
#X connect 38 0 27 0;
#X connect 39 0 18 0;
#X connect 40 0 24 0;
#X connect 40 1 23 0;
#X connect 40 2 22 0;
#X connect 41 0 42 0;
#X connect 42 0 13 0;
#X connect 42 1 15 0;
#X connect 44 0 41 0;
#X connect 44 1 41 1;
#X connect 45 0 46 1;
#X connect 46 0 32 0;
#X connect 46 0 32 1;
#X connect 47 0 34 0;
#X connect 48 0 37 0;
#X connect 48 1 36 0;
#X connect 50 0 56 0;
#X connect 50 0 57 0;
#X connect 51 0 54 0;
#X connect 52 0 8 0;
#X connect 52 0 53 0;
#X connect 56 0 55 0;
#X connect 60 0 10 0;
#X connect 60 0 16 0;
#X connect 61 0 72 0;
#X connect 62 0 63 0;
#X connect 62 1 61 1;
#X connect 63 0 61 0;
#X connect 64 0 65 0;
#X connect 65 0 67 0;
#X connect 66 0 103 1;
#X connect 66 0 103 0;
#X connect 67 0 66 0;
#X connect 68 0 70 0;
#X connect 69 0 72 1;
#X connect 70 0 72 1;
#X connect 71 0 70 0;
#X connect 72 0 60 0;
#X connect 73 0 68 0;
#X connect 73 1 71 0;
#X connect 73 1 69 0;
#X connect 74 0 75 0;
#X connect 74 0 77 0;
#X connect 74 0 92 0;
#X connect 77 0 76 0;
#X connect 78 0 80 0;
#X connect 79 0 74 0;
#X connect 80 0 79 0;
#X connect 81 0 82 0;
#X connect 82 0 80 1;
#X connect 83 0 81 0;
#X connect 84 0 87 0;
#X connect 85 0 88 0;
#X connect 86 0 84 0;
#X connect 86 0 102 0;
#X connect 87 0 85 0;
#X connect 87 0 90 0;
#X connect 88 0 89 0;
#X connect 88 0 94 0;
#X connect 89 0 83 0;
#X connect 90 0 91 0;
#X connect 90 0 94 1;
#X connect 91 0 78 0;
#X connect 94 0 93 0;
#X connect 96 0 25 0;
#X connect 98 0 97 0;
#X connect 99 0 98 0;
#X connect 100 0 99 0;
#X connect 101 0 100 0;
#X connect 102 0 100 1;
#X connect 103 0 62 0;
#X connect 104 0 105 0;
#X connect 105 0 106 1;
