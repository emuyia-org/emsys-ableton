#N canvas 1440 928 849 976 12;
#X obj 61 185 midiout 3;
#X msg 60 149 240 0 32 107 127 66 2 2 64 106 33 247;
#X obj 60 113 loadbang;
#X text 129 111 required for init ml3_text;
#X obj 390 53 loadbang;
#X obj 396 172 ml3/text;
#X obj 393 108 del 50;
#X obj 391 76 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 474 142 emsys;
#X msg 422 139 alpha;
#X obj 545 151 ml3/clr;
#X obj 541 55 loadbang;
#X msg 549 115 clear;
#X obj 542 86 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 316 264 ctlin 106 33;
#X obj 215 264 ctlin 107 33;
#X obj 321 294 sel 127, f 8;
#X obj 216 297 sel 127;
#X obj 318 326 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 209 332 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 323 235 stop;
#X text 66 34 caution: if ml3 gets unplugged after this occurs \, text input wont work thereafter until this is triggered again, f 31;
#X obj 317 359 s t.stop;
#X obj 212 401 s t.cont;
#X text 220 235 cont;
#X obj 356 438 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 341 470 s t.prime;
#X text 383 438 prime (midi: 250);
#X obj 991 195 ml3/clr;
#X obj 1034 169 loadmess red;
#X obj 1022 145 loadmess 0;
#X obj 1049 110 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 991 143 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 987 42 r t.4n;
#X msg 961 102 1;
#X msg 1000 111 0;
#X obj 998 72 del 50;
#X text 1313 383 ideas for making most of limited buttons:;
#X text 1312 412 pressing cont btn when it's already playing will trigger a tin, f 64;
#X text 1311 484 orange button reloads/resets set \, but you have to press it three times without pressing anything else;
#X text 1308 530 rec button does a hold;
#X text 1312 665 func+notched knob will seek through segments \, forward or back;
#X text 1305 711 func+notched knob+clicked down will seek through available msets \, and when released will load them in;
#X text 1310 560 tap button is the 'function' button \, and modifies the behaviour of the sliders and leftmost knob (the one with the notches). it should be a toggle on/off rather than 'hold down' because it's too awkward to hold. if you press it again \, or any other pad \, or play a note \, it will reset the func status to off.;
#X text 1311 819 func+slider 1 & slider 2 - set MD & MnM bank for current seg;
#X text 1312 841 func+slider 3 - set MnM poly?;
#X text 1309 858 fun+slider 4 - display all data for current segment (sliding up and down cycles through showing all the different values);
#X text 1309 752 func+first three pads (arp/pad/prog) - insert seg before current seg (duplicates) \, COPY button (after which 'inserting' will insert the copied seg) \, and delete current seg;
#X text 1309 893 func+knobs - adjust current segment data's values - segment repetitions \, loop length \, bpm target \, bpm ramp \, pd seq module \, pd snd module \, (spare) \, tin?;
#X obj 669 123 ctlin, f 9;
#X obj 1248 91 ctlin 108 33;
#X obj 812 76 ctlin 109 33;
#X obj 59 318 r t.transport_status;
#X obj 787 287 ctlin 105 33;
#X text 1312 438 pressing and holding stop \, then pressing play \, does a prime \, instead of the orange button;
#X obj 347 412 onebang;
#X msg 398 362 stop;
#X obj 396 334 b;
#X text 1748 444 @done;
#X obj 791 327 sel 127;
#X obj 888 287 ctlin;
#X floatatom 701 175 5 0 0 0 - - - 0;
#X obj 904 315 sel 105;
#X obj 902 385 counter 0 0 2;
#X obj 903 414 sel 2;
#X obj 929 524 s t.stop;
#X obj 801 524 s ctl.reload_mset;
#X obj 900 484 t;
#X obj 899 448 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 793 232 rest / reload mset - orange pad must be pressed 3 times, f 21;
#X text 1737 488 @done;
#X obj 176 549 onebang;
#X obj 214 439 sel 1;
#X obj 237 477 b;
#X msg 235 509 stop;
#X floatatom 94 401 5 0 0 0 - - - 0;
#X obj 104 352 pipe 50;
#X obj 174 625 s tin.toggle;
#X obj 171 589 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 87 549 set \$1;
#X obj 82 511 r tin.toggle;
#X text 239 554 toggle tin - press cont btn when already playing, f 14;
#X text 1770 411 @done;
#X text 927 453 reset;
#X obj 900 554 s s.reset;
#X obj 946 348 b;
#X obj 1250 127 sel 127;
#X text 1253 54 hold toggle (red btn), f 13;
#X obj 1258 192 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 1174 152 set \$1;
#X obj 1168 114 r s.hold;
#X obj 1261 228 s s.hold;
#X text 1728 522 @done;
#X text 805 100 last 'white' button (tap), f 12;
#X obj 454 981 ml3/clr;
#X obj 466 785 r t.transport_status;
#X msg 491 891 9;
#X obj 469 850 t f b;
#X msg 528 892 green;
#X floatatom 650 177 5 0 0 0 - - - 0;
#X obj 464 818 change;
#X obj 367 859 == 0;
#X obj 364 895 t f b;
#X msg 426 928 white;
#X msg 386 936 8;
#X msg 351 769 0;
#X obj 351 736 onebang;
#X obj 283 323 b;
#X obj 279 745 onebang;
#X msg 280 775 0;
#X obj 280 409 onebang;
#X msg 272 349 stop;
#X obj 555 421 del 50;
#X obj 554 459 del 50;
#X obj 551 495 del 50;
#X obj 612 424 del 50;
#X obj 611 462 del 50;
#X obj 608 498 del 50;
#X obj 580 385 b;
#X obj 563 533 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 516 449 0;
#X text 463 481 rapid flash to show prime action, f 12;
#X obj 1346 175 r s.hold;
#X obj 1357 307 ml3/clr;
#X msg 1377 275 10;
#X msg 1415 277 blue;
#X obj 1360 238 t f b;
#X obj 1351 205 change;
#X obj 1299 159 b;
#X obj 488 734 ml3/clr;
#X obj 489 645 t f b;
#X obj 480 612 change;
#X msg 506 682 9;
#X msg 544 684 yellow;
#X obj 606 620 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 604 647 sel 0;
#X obj 475 582 r tin.toggle;
#X obj 596 593 gate 0;
#X msg 611 686 1;
#X obj 454 690 sel 0;
#X obj 687 606 r tin.tinning;
#X obj 703 730 ml3/clr;
#X msg 754 686 yellow;
#X msg 718 686 8;
#X msg 682 684 1;
#X obj 741 651 onebang;
#X obj 718 574 r t.4n;
#X obj 704 649 t;
#X obj 1013 521 ml3/clr;
#X msg 1064 479 red;
#X obj 633 559 r t.16n;
#X msg 1028 479 7;
#X msg 960 483 1;
#X msg 991 480 0;
#X obj 1043 435 t;
#X obj 977 440 del 1000;
#X obj 822 378 b;
#X obj 754 410 s ctl.load_clrstore;
#X obj 658 56 em.ctl.clrstore;
#X text 912 2315 comment;
#X text 4671 675 comment;
#X obj 1072 257 ctlin 27 33;
#X obj 1070 291 sel 127;
#X obj 1070 364 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 1065 322 1;
#X text 1086 228 shift;
#X obj 1116 329 b;
#X obj 1149 295 s ctl.load_clrstore;
#X obj 1164 329 s ctl.update_text;
#X obj 476 298 onebang;
#X obj 513 261 r s.reset;
#X obj 959 591 ctlin 28 33;
#X obj 1055 587 ctlin 118 33;
#X floatatom 1057 626 5 0 0 0 - - - 0;
#X floatatom 953 630 5 0 0 0 - - - 0;
#X obj 953 688 > 64;
#X obj 1528 75 ctlin;
#X obj 1525 107 sel 33;
#X obj 1457 228 s ctl.update_text;
#X obj 1615 182 del 20000;
#X obj 1522 157 gate 1;
#X msg 1607 219 1;
#X obj 1590 148 t;
#X msg 1578 180 0;
#X obj 1521 193 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1603 257 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1595 99 loadmess 1;
#X obj 1600 69 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 1492 46 refresh ml3 text display;
#X obj 940 1157 s s.seek_seg;
#X obj 1056 664 sel 127;
#X msg 1055 696 1;
#X obj 951 741 gate 1;
#X obj 1061 737 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 942 858 f;
#X obj 923 813 r s.current_seg_id;
#X obj 939 911 - 1;
#X obj 978 914 + 1;
#X obj 980 861 f;
#X obj 951 772 sel 0 1;
#X floatatom 865 812 5 0 0 0 - - - 0;
#X obj 866 777 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 916 781 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1017 781 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1105 716 sel 0;
#X obj 951 1050 f;
#X floatatom 945 1086 5 0 0 0 - - - 0;
#X obj 1008 1125 ml3/text;
#X obj 1007 1090 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 1142 1095 \$1;
#X obj 1016 1052 t b b f;
#X msg 1036 1094 seek segment;
#X obj 798 1171 s ctl.update_text;
#X obj 908 1089 b;
#X obj 847 1126 del 50;
#X floatatom 1032 933 5 0 127 0 - - - 0;
#X obj 1038 900 r s.num_of_segs;
#X obj 953 958 min;
#X obj 940 989 max 1;
#X floatatom 1008 1006 5 0 0 0 - - - 0;
#X text 1058 843 seek seg with leftmost knob (held down), f 15;
#X obj 1128 767 s ctl.seek_knob_state;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 4 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 7 0 9 0;
#X connect 7 0 6 0;
#X connect 8 0 5 2;
#X connect 9 0 5 1;
#X connect 11 0 13 0;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 14 0 16 0;
#X connect 15 0 17 0;
#X connect 16 0 18 0;
#X connect 16 0 55 1;
#X connect 16 0 110 0;
#X connect 16 1 57 0;
#X connect 17 0 19 0;
#X connect 17 0 55 0;
#X connect 17 0 110 1;
#X connect 17 1 107 0;
#X connect 18 0 22 0;
#X connect 19 0 23 0;
#X connect 19 0 71 0;
#X connect 19 0 169 0;
#X connect 25 0 26 0;
#X connect 25 0 106 1;
#X connect 25 0 118 0;
#X connect 29 0 28 2;
#X connect 30 0 28 1;
#X connect 31 0 29 0;
#X connect 31 0 30 0;
#X connect 32 0 28 0;
#X connect 33 0 34 0;
#X connect 33 0 36 0;
#X connect 33 0 31 0;
#X connect 34 0 32 0;
#X connect 35 0 32 0;
#X connect 36 0 35 0;
#X connect 36 0 31 0;
#X connect 49 0 99 0;
#X connect 49 1 61 0;
#X connect 50 0 86 0;
#X connect 52 0 76 0;
#X connect 53 0 59 0;
#X connect 55 0 25 0;
#X connect 56 0 55 0;
#X connect 57 0 56 0;
#X connect 57 0 106 0;
#X connect 59 0 63 0;
#X connect 59 1 156 0;
#X connect 60 1 62 0;
#X connect 62 1 85 0;
#X connect 63 0 64 0;
#X connect 64 0 68 0;
#X connect 67 0 66 0;
#X connect 67 1 65 0;
#X connect 67 1 84 0;
#X connect 68 0 67 0;
#X connect 68 0 154 0;
#X connect 71 0 78 0;
#X connect 72 0 71 1;
#X connect 72 1 73 0;
#X connect 73 0 74 0;
#X connect 74 0 71 0;
#X connect 76 0 75 0;
#X connect 76 0 72 0;
#X connect 78 0 77 0;
#X connect 79 0 78 0;
#X connect 80 0 79 0;
#X connect 85 0 63 2;
#X connect 86 0 88 0;
#X connect 86 1 128 0;
#X connect 88 0 91 0;
#X connect 89 0 88 0;
#X connect 90 0 89 0;
#X connect 95 0 100 0;
#X connect 96 0 94 1;
#X connect 97 0 94 0;
#X connect 97 1 96 0;
#X connect 97 1 98 0;
#X connect 98 0 94 2;
#X connect 100 0 97 0;
#X connect 100 0 101 0;
#X connect 101 0 102 0;
#X connect 102 0 94 0;
#X connect 102 1 104 0;
#X connect 102 1 103 0;
#X connect 103 0 94 2;
#X connect 104 0 94 1;
#X connect 105 0 102 0;
#X connect 106 0 105 0;
#X connect 107 0 111 0;
#X connect 107 0 108 0;
#X connect 108 0 109 0;
#X connect 109 0 97 0;
#X connect 110 0 108 1;
#X connect 111 0 110 0;
#X connect 112 0 115 0;
#X connect 112 0 120 0;
#X connect 113 0 116 0;
#X connect 113 0 119 0;
#X connect 114 0 117 0;
#X connect 114 0 119 0;
#X connect 115 0 113 0;
#X connect 115 0 119 0;
#X connect 116 0 114 0;
#X connect 116 0 119 0;
#X connect 117 0 119 0;
#X connect 118 0 112 0;
#X connect 119 0 97 0;
#X connect 120 0 119 0;
#X connect 122 0 127 0;
#X connect 124 0 123 1;
#X connect 125 0 123 2;
#X connect 126 0 123 0;
#X connect 126 1 125 0;
#X connect 126 1 124 0;
#X connect 127 0 126 0;
#X connect 128 0 127 0;
#X connect 130 0 139 0;
#X connect 130 1 133 0;
#X connect 130 1 132 0;
#X connect 131 0 130 0;
#X connect 131 0 137 0;
#X connect 132 0 129 1;
#X connect 133 0 129 2;
#X connect 134 0 135 0;
#X connect 135 0 138 0;
#X connect 135 1 97 0;
#X connect 136 0 131 0;
#X connect 137 0 134 0;
#X connect 138 0 130 0;
#X connect 139 0 100 0;
#X connect 139 1 129 0;
#X connect 140 0 145 1;
#X connect 140 0 147 0;
#X connect 142 0 141 2;
#X connect 143 0 141 1;
#X connect 144 0 141 0;
#X connect 145 0 100 0;
#X connect 146 0 145 0;
#X connect 147 0 144 0;
#X connect 147 1 143 0;
#X connect 147 1 142 0;
#X connect 149 0 148 2;
#X connect 150 0 137 1;
#X connect 151 0 148 1;
#X connect 152 0 148 0;
#X connect 153 0 148 0;
#X connect 154 0 152 0;
#X connect 154 0 155 0;
#X connect 154 1 151 0;
#X connect 154 1 149 0;
#X connect 155 0 153 0;
#X connect 156 0 157 0;
#X connect 161 0 162 0;
#X connect 161 0 167 0;
#X connect 162 0 164 0;
#X connect 162 0 168 0;
#X connect 162 1 163 0;
#X connect 162 1 166 0;
#X connect 164 0 163 0;
#X connect 169 0 25 0;
#X connect 170 0 169 1;
#X connect 171 0 174 0;
#X connect 172 0 173 0;
#X connect 173 0 190 0;
#X connect 174 0 175 0;
#X connect 175 0 192 1;
#X connect 176 2 177 0;
#X connect 177 0 180 1;
#X connect 179 0 181 0;
#X connect 180 0 182 0;
#X connect 180 0 178 0;
#X connect 180 0 184 0;
#X connect 181 0 180 0;
#X connect 181 0 185 0;
#X connect 182 0 183 0;
#X connect 182 1 179 0;
#X connect 183 0 180 0;
#X connect 186 0 180 0;
#X connect 187 0 186 0;
#X connect 190 0 191 0;
#X connect 190 1 193 0;
#X connect 190 1 204 0;
#X connect 191 0 193 0;
#X connect 192 0 199 0;
#X connect 193 0 192 0;
#X connect 193 0 221 0;
#X connect 194 0 196 0;
#X connect 195 0 194 1;
#X connect 195 0 198 1;
#X connect 196 0 217 0;
#X connect 197 0 217 0;
#X connect 198 0 197 0;
#X connect 199 0 194 0;
#X connect 199 0 202 0;
#X connect 199 1 198 0;
#X connect 199 1 203 0;
#X connect 200 0 194 1;
#X connect 200 0 198 1;
#X connect 201 0 200 0;
#X connect 204 0 205 0;
#X connect 205 0 206 0;
#X connect 205 0 213 0;
#X connect 206 0 189 0;
#X connect 208 0 207 0;
#X connect 209 0 207 2;
#X connect 210 0 208 0;
#X connect 210 1 211 0;
#X connect 210 2 209 0;
#X connect 211 0 207 1;
#X connect 213 0 214 0;
#X connect 214 0 212 0;
#X connect 215 0 217 1;
#X connect 216 0 215 0;
#X connect 217 0 218 0;
#X connect 218 0 219 0;
#X connect 219 0 210 0;
#X connect 219 0 205 1;
#X connect 219 0 198 1;
#X connect 219 0 194 1;
