#N canvas 827 239 527 327 12;
#X obj 921 50 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 261 332 s midich_mnm_notes;
#X obj 401 332 s midich_md_notes;
#X obj 652 116 route 248;
#X obj 718 205 i;
#X obj 652 144 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 696 144 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 718 243 change;
#X obj 718 317 s midich_clock;
#X obj 789 134 r midich_clock_learn;
#X msg 768 205 set -1;
#X obj 789 168 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 718 278 nbx 4 20 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 652 78 midirealtimein, f 17;
#X obj 1047 427 s midich_ml3;
#X obj 1083 133 r midich_ctl_learn;
#X text 789 59 dynamically assign clock midi ch, f 12;
#X obj 365 282 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 303 282 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 238 282 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 178 282 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 99 332 s midich_mnm_pgm;
#X obj 224 363 s midich_md_pgm;
#X obj 75 374 s midich_mnm_sysex;
#X obj 261 398 s midich_md_sysex;
#X obj 1229 459 s midich_ml3_pads;
#X obj 1270 175 bng 25 250 50 0 empty empty learn 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X floatatom 1002 229 5 0 0 0 - - - 12;
#X floatatom 1045 226 5 0 0 0 - - - 12;
#X obj 1002 264 sel 27;
#X obj 1036 318 i;
#X obj 1087 190 bng 25 250 50 0 empty empty learn 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X floatatom 1037 350 5 0 0 0 - - - 12;
#X obj 1001 195 ctl.in;
#X floatatom 1226 239 5 0 0 0 - - - 12;
#X obj 1223 349 i;
#X floatatom 1225 390 5 0 0 0 - - - 12;
#X obj 1172 206 note.in, f 10;
#X obj 1170 239 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 1004 290 onebang 0;
#X obj 1196 305 onebang 0;
#X obj 1171 270 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X msg 325 149 25;
#X obj 282 110 loadmess bang;
#X obj 282 70 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 921 21 loadmess bang;
#X obj 52 196 r midich_mnm_set;
#X obj 73 165 r midich_md_set;
#X obj 102 91 r midich_md_notes_set;
#X obj 65 126 r midich_mnm_notes_set;
#X msg 289 148 30;
#X msg 252 148 63;
#X msg 359 149 26;
#X text 22 62 manual configuration suited for plugdata;
#X text 319 60 fixed default assignment \, suited for pd;
#X obj 1013 52 r scmgr.InitScreenFinished;
#X obj 947 135 onebang;
#X obj 994 82 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X obj 480 102 bng 25 250 50 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1;
#X msg 480 147 15;
#X msg 514 148 14;
#X msg 549 149 9;
#X obj 283 32 r env_prod_defaults_set;
#X obj 485 36 r env_dev_defaults_set;
#X msg 614 150 13;
#X obj 532 278 nbx 4 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #191919 #e1e1e1 #e1e1e1 0 256;
#X obj 532 331 s midich_thru;
#X msg 397 148 62;
#X msg 578 149 10;
#X obj 28 236 r midich_thru_set;
#X obj 767 517 tosymbol;
#X obj 763 658 s scmgr.static;
#X obj 764 556 prepend b;
#X obj 769 586 t a b;
#X msg 793 628 a -;
#X obj 1272 130 r midich_ctlpads_learn;
#X obj 1003 462 s midich_ctlpads_learn;
#X obj 1023 387 t b f;
#X msg 891 494 press Tap;
#X msg 768 478 press Shift;
#X obj 1103 586 s scmgr.PreventShiftFromEscapingUI;
#X msg 1132 550 1;
#X msg 1105 551 0;
#X obj 1228 417 t b f;
#X text 46 428 my hardcoded preferences for md/mcl/mnm MIDI ch's: \; MD pgm IN should be set to 14 \; MNM pgm IN should be set to 15 \; MCL CHRO should be set to 10 (this is effectively MD notes IN) \; MNM auto track CH should be left at 9 (this is MNM notes IN) \; CC can be sent from this patch to a DAW via CH 13;
#X text 31 542 info about the quirks of emsys MIDI configuration: \; \; how separate PGM for md/mnm works: MCL USB FWD is set to 2 so that PGM sent via MegaCMD USB MIDI gets routed to MNM \, whereas PGM sent directly via MIDI to MCL PORT 2 IN gets routed to MD (as long as TRANS RECV is set to from 2 \, which it should be anyway for this setup). this is the reason that MNM PGM midich is set to a number in a different 16 digit range compared to the MD PGM \; \; it should also be noted that there is a difference between how pure data handles MIDI channels for connected devices versus how plugdata handles it. plugdata seems to operate within a single 16 digit range for all devices (1-16) \, whereas pure data \, which is what the prod environment uses \, splits the devices across groups of 16 (e.g. device 1 is 1-16 \, device 2 is 17-32 \, etc.) \; \; this is why I have made the MIDI ch configurable \, so that there is better flexibility between the dev and prod environment \; \; additional note: CC can be sent from this patch to a DAW via CH 13 the CC is sent to the MegaCMD via USB MIDI \, which is directed to MNM as normal. since ch13 is not used for anything on the MNM \, it's ignored. we can then listen to this CC through the MNM's MIDI THRU port connected to a MIDI interface. this is useful for retrieving tempo information from emsys for recording, f 90;
#X obj 1344 586 s scmgr.PreventScreenSwitching;
#X connect 0 0 11 0;
#X connect 0 0 56 1;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 7 0 12 0;
#X connect 9 0 11 0;
#X connect 10 0 7 0;
#X connect 11 0 10 0;
#X connect 12 0 8 0;
#X connect 13 0 3 0;
#X connect 13 1 4 1;
#X connect 15 0 31 0;
#X connect 17 0 2 0;
#X connect 18 0 1 0;
#X connect 19 0 22 0;
#X connect 19 0 24 0;
#X connect 20 0 21 0;
#X connect 20 0 23 0;
#X connect 26 0 40 1;
#X connect 27 0 29 0;
#X connect 28 0 30 1;
#X connect 29 0 39 0;
#X connect 30 0 32 0;
#X connect 31 0 39 1;
#X connect 32 0 77 0;
#X connect 33 1 27 0;
#X connect 33 2 28 0;
#X connect 34 0 35 1;
#X connect 35 0 36 0;
#X connect 36 0 83 0;
#X connect 37 0 38 0;
#X connect 37 1 34 0;
#X connect 38 0 41 0;
#X connect 39 0 30 0;
#X connect 40 0 35 0;
#X connect 41 0 40 0;
#X connect 42 0 18 0;
#X connect 43 0 51 0;
#X connect 43 0 50 0;
#X connect 43 0 42 0;
#X connect 43 0 52 0;
#X connect 43 0 67 0;
#X connect 44 0 43 0;
#X connect 45 0 0 0;
#X connect 46 0 20 0;
#X connect 47 0 19 0;
#X connect 48 0 17 0;
#X connect 49 0 18 0;
#X connect 50 0 19 0;
#X connect 51 0 20 0;
#X connect 52 0 17 0;
#X connect 55 0 57 0;
#X connect 56 0 31 0;
#X connect 56 0 79 0;
#X connect 57 0 56 0;
#X connect 57 0 81 0;
#X connect 58 0 59 0;
#X connect 58 0 60 0;
#X connect 58 0 68 0;
#X connect 58 0 64 0;
#X connect 58 0 61 0;
#X connect 59 0 20 0;
#X connect 60 0 19 0;
#X connect 61 0 18 0;
#X connect 62 0 44 0;
#X connect 63 0 58 0;
#X connect 64 0 65 0;
#X connect 65 0 66 0;
#X connect 67 0 65 0;
#X connect 68 0 17 0;
#X connect 69 0 65 0;
#X connect 70 0 72 0;
#X connect 72 0 73 0;
#X connect 73 0 71 0;
#X connect 73 1 74 0;
#X connect 74 0 71 0;
#X connect 75 0 26 0;
#X connect 77 0 76 0;
#X connect 77 0 78 0;
#X connect 77 1 14 0;
#X connect 78 0 70 0;
#X connect 79 0 70 0;
#X connect 81 0 80 0;
#X connect 81 0 86 0;
#X connect 82 0 80 0;
#X connect 82 0 86 0;
#X connect 83 0 82 0;
#X connect 83 1 25 0;
